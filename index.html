<!DOCTYPE html>
<html>

<head>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>

    <!-- Formatting -->
    <title>US Crime Analysis — 1975 to 2015</title>

    <!-- Stylesheet Import -->
    <link rel="stylesheet" href="css/styles.css">


    <style>
        /* .row, .column {
            border: 1% solid white;
            border-collapse: collapse;
        } */

        /* Set additional styling options for the columns*/
        .column {
            float: left;
        }

        .tl {
            width: 60%;
            height: 650px;
        }

        .tr {
            width: 40%;
            height:650px;
        }

        .bl {
            width: 43%;
            height:630px;
        }

        .br {
            width: 57%;
            height:630px;
        }

        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        .slider {
            margin-left: 40%
        }
    </style>
</head>

<body>
    <div class="row">
        <hr>
        <h1 style="text-align:center">US Crime Analysis — 1975 to 2015</h1>
        <hr>
    </div>

    <!-- Overview Seections -->
    <div class="row">
        <div class="column tl" style="background-color:#FFFFFF;">
            <h2 style="text-align:center">Map of Violent Crime Cases by State in the US</h2>
            <br>
            <div id="vis1"></div>
            <br>
            <div class="slidecontainer">
                <h3 style="text-align:center">Chosen Year of Data: <span id="sliderValue"></span></h3>
                <input type="range" min="1975" max="2015" value="1994" class="slider" id="overviewMapSlider">
                
            </div>
        </div>
        <div class="column tr" style="background-color:#FFFFFF;">
            <h2 style="text-align:center">Trends over time</h2>
            
            <!-- make containers for the visualtisations within the columns -->
            <div id="vis2"></div>
            <br>
            <br>
            <div id="vis3"></div>
        </div>
    </div>

    <!-- Case Study section -->
    <div class="row">
        <hr>
        <h2 style="text-align:center">Detailed Statistics</h2>
        <hr>
        <div class="column bl" style="background-color:#FFFFFF;">   
            <br> 
            <div id="overview_bubble"></div>
            <br>
            <br>
            <button onclick="displayHomi()">Homicide</button>
            <button onclick="displayRape()">Rape</button>
            <button onclick="displayRobb()">Robbery</button>
        </div>
        <div class="column br" style="background-color:#FFFFFF;">
            <br>
            <div id="juv"></div>
            <br>
            <br>
            <button onclick="displayOverview()">Overview</button>
            <button onclick="displayAssault()">Assault</button>
            <button onclick="displayHomicide()">Homicide</button>
            <button onclick="displayRape()">Rape</button>
            <button onclick="displayRobbery()">Robbery</button>
            <br><br>
            <i>*Overview provides an overview of juvenile statistics</i><br>
            <i>*Allows selecting to display lollipop graphs of different crime types using buttons above</i>
        </div>
    </div>
    <!-- References Section -->
    <div class="row">
        <hr>
        <h2 style="text-align:center">References</h2>
        <ol type="1">
            <li>Mapshaper.org (2022). Mapshaper is an editor for map data. Retrieved from: https://mapshaper.org/ </li>
            <li>United States Census Bureau. (2018). Cartographic Boundary Files - Shapefile. Retrieved from: https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html </li>
            <li>Blue7red. (2021). arrests national juvenile dataset study. Retrieved from: https://www.kaggle.com/code/rhythmcam/arrests-national-juvenile-dataset-study/data </li>
            <li>Kareem, H.F. (2021). fatalities from 2000 to 2016. Retrieved from: https://www.kaggle.com/datasets/hamdallak/police-fatalities-from-2000-to-2016 </li>
            <li>Berkay, A. (2019). USArrest Crime - Kmeans Clustering - Elbow. Retrieved from: https://www.kaggle.com/code/berkayalan/usarrest-crime-kmeans-clustering-elbow/data </li>
        </ol>
        <hr>
    </div>
</body>

<!-- Vegalite Embeds -->

<script type="text/javascript">

    // JS scripting
    var slider = document.getElementById("overviewMapSlider");
    var output = document.getElementById("sliderValue");
    output.innerHTML = slider.value; // Display the default slider value

    // Update the current slider value (each time you drag the slider handle)
    slider.oninput = function() {
        output.innerHTML = this.value;
        var spec1 = `https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/overViewMap/${slider.value}.json`;
        vegaEmbed('#vis1', spec1).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);
    }

    function displayOverview(){
        vegaEmbed('#juv', juv1).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayAssault(){
        vegaEmbed('#juv', juv2).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayHomicide(){
        vegaEmbed('#juv', juv3).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayRape(){
        vegaEmbed('#juv', juv4).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayRobbery(){
        vegaEmbed('#juv', juv5).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayHomi(){
        vegaEmbed('#overview_bubble', overview1).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayRape(){
        vegaEmbed('#overview_bubble', overview2).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    function displayRobb(){
        vegaEmbed('#overview_bubble', overview3).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    }

    var spec1 = `https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/overViewMap/${slider.value}.json`;
    var spec2 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/yearlyOverview.json";
    var spec3 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/fatalities.json";

    var overview1 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/overview_bubble/ass_hom_bubble.json";
    var overview2 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/overview_bubble/ass_rape_bubble.json";
    var overview3 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/overview_bubble/ass_rob_bubble.json";

    var juv1 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/juv/juvOverall.json";
    var juv2 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/juv/juvAssault.json";
    var juv3 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/juv/juvHomicide.json";
    var juv4 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/juv/juvRape.json";
    var juv5 = "https://raw.githubusercontent.com/PathFinder4/FIT3179-Visualisation-2/main/js/juv/juvRobbery.json";

    vegaEmbed('#vis1', spec1).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    
     vegaEmbed('#vis2', spec2).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
  
    vegaEmbed('#vis3', spec3).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
  
    vegaEmbed('#juv', juv1).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#overview_bubble', overview3).then(function(result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);


    
  
  </script>

</html>